query GetProducts($status: String = "active") {
  products(where: { status: { _eq: $status } }, order_by: { created_at: desc }) {
    id
    name
    slug
    description
    price
    stock
    status
    created_at
    category {
      id
      name
      type
    }
    product_images(order_by: { is_primary: desc, sort_order: asc }, limit: 1) {
      id
      image_url
      alt_text
      is_primary
    }
  }
}

query GetProductsByCategory($categoryId: Int!, $status: String = "active") {
  products(
    where: { 
      category_id: { _eq: $categoryId }
      status: { _eq: $status }
    }
    order_by: { created_at: desc }
  ) {
    id
    name
    slug
    description
    price
    stock
    status
    created_at
    category {
      id
      name
      type
    }
    product_images(order_by: { is_primary: desc, sort_order: asc }, limit: 1) {
      id
      image_url
      alt_text
      is_primary
    }
  }
}

query GetCategories($type: String = "product") {
  categories(where: { type: { _eq: $type } }, order_by: { name: asc }) {
    id
    name
    type
  }
}